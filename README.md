# ScreenMosaic

## NOTE
This is an ongoing project and the documentation still needs much work.
If you would like to contribute to the project or documentation, you can do
so by creating forking the code and making pull requests. If you would like
to make suggestions for the code or documentation, you could also open a new
issue on GitHub.

Also, please note that I'm a Ruby on Rails developer and this is my first
Node.js project. If you have suggestions to improve my code or make it
easier to use, I would love your feedback :)

## Basic Concept
The concept of ScreenMosaic is to use standard web technologies to display
one large image across multiple displays (such as tablets or monitors attached
to dedicated computers). The device or screen should be able to a web page at
full-screen to make use of the project.

The technology requirements for creating a ScreenMosaic are these three main components:
* a server (powered by this Node.js project)
* multiple screens (i.e. tablets, computers attached to monitors, etc)
* a network (likely Wi-Fi if using tablets)

The serverâ€™s primary purpose is to send and receive websocket commands for
real-time updating of the screens, keep track of the X and Y position of
each device, and to host the media. The server does not require a database,
but instead the positions of the devices are stored in `config/screens.json`.

In an attempt to create software that is flexible for a wide number of use cases,
this software *does not* include any functionality to trigger a change on the screens.
You will need to trigger a request in your own implementation, but examples will be
included in this repo soon.

## Launching the Server
Before starting, you will need to have Node.js installed on your machine and/or server
powering the wall.

Launch the server from your terminal shell by moving into the project's directory and
running `node ./app.js`. By default this will run on port 1234, so `127.0.0.1:1234`
when accessed locally or `[your-ip-address]:1234` when accessed by other devices on
the same network.

## Screens Setup
Start by arranging multiple screens and accessing the server from a web browser on
the devices at `http://[your-ip-address]:1234/`.

The first time you open the web page, you will get a message that the screen is not
defined in `screens.json`. You will need to add that screen using the token generated
in the browser (see below).

Once a screen is defined, you can access `http://[your-ip-address]:1234/setup` from
any computer on the same network to help position the screens correctly in `screens.json`.

## screens.json
This configuration file is required by the server to know where each screen is in
relation to each other in the overall mosaic. The screens are stored in an array,
and must have the following key/values for each screen:
* id
* token
* top
* left

Additionally, you will need to specify the following if you would like the server
to preprocess (crop) the images ahead of time:
* width
* height

**id**: [integer || string] The id is a value that you assign and should be unique.
It can be any alphanumeric value, but an integer may be the most common value.

**token**: [string] The token is generated by the web server for each browser session
and is stored as a cookie on the device. This is the primary way that the server
associates a screen in `screens.json` to the device.

**top**: [integer] This value is the offset in pixels of the specific screen from the
top. This value should be a positive value or else an image will not display fully or
at all on the device.

**left**: [integer] This value is the offset in pixels of the specific screen from the
left. This value should be a positive value or else an image will not display fully or
at all on the device.

**width**: [integer] Optional. This value is used when the server crops an image
with the preprocess feature. This will be the resulting size of the cropped image
and should be equal to the width (in pixels) of the screen.

**height**: [integer] Optional. This value is used when the server crops an image
with the preprocess feature. This will be the resulting size of the cropped image
and should be equal to the height (in pixels) of the screen.

## Endpoints

### Web endpoints
`/` The root URL is the primary path used by all of the screens. By default, this
path will use the generated token to reference the settings in `screens.json` but
you can also point to a specific screen config by using `/?id=[value]` in the browser.

`/preview` This is an experimental  


##
The server software also has a few tools to help align each screen in the overall grid and to crop the images for the screens.

## Preprocessing

## Full Screen

To simplify the setup process, each tablet loads the same URL hosted from the Node.js server, but each device generates a unique token that is stored as a cookie on the device (fig. 15). This allows the server to know where this screen is located within the X/Y grid and handle the media appropriately. This technique is similar in concept to how visitors to a website can get targeted ads specific to the user, even though every user is visiting the same page.
